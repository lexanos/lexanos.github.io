<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>David Axel Dascanio ‚Äî Portfolio</title>
  <style>
    :root{--bg:#0b0d12;--card:#111318;--muted:#9aa0aa;--accent:#4da3ff;--glass:rgba(255,255,255,0.03);--text:#e6e6e6}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text)}
    header{display:flex;justify-content:space-between;align-items:center;padding:18px 28px;background:#07080a;position:sticky;top:0;z-index:30}
    header h1{margin:0;font-size:18px}
    nav{display:flex;gap:12px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;cursor:pointer}
    nav a.active,nav a:hover{color:var(--text);background:var(--glass)}
    #lang{margin-left:12px;background:#0b0d12;border:1px solid #1a1d24;color:var(--text);padding:6px;border-radius:6px}
    main{padding:28px}
    .hero{display:flex;gap:24px;align-items:center;justify-content:space-between}
    .hero-right{flex-shrink:0}
    .hero-right img{width:220px;height:220px;object-fit:cover;border-radius:16px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 8px 24px rgba(0,0,0,0.6)}
    .hero-left{max-width:720px}
    .hero h2{font-size:34px;margin:0 0 8px}
    .hero p{color:var(--muted);margin:0 0 12px}
    .cta{display:inline-block;background:var(--accent);color:#fff;padding:12px 18px;border-radius:10px;text-decoration:none;font-weight:600;cursor:pointer}
    .section{display:none;margin-top:18px}
    .section.active{display:block}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;margin-top:18px}
    .card{background:var(--card);border-radius:12px;overflow:hidden;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
    .card .thumb{height:150px;background:#000;display:flex;align-items:center;justify-content:center;color:var(--muted);position:relative}
    .card .thumb img, .card .thumb video{width:100%;height:100%;object-fit:cover;display:block}
    .card .meta{padding:12px}
    .card h4{margin:0 0 6px}
    .card p{margin:0;color:var(--muted);font-size:14px}
    .detail{background:var(--card);padding:18px;border-radius:12px}
    footer{padding:24px;text-align:center;color:var(--muted);border-top:1px solid rgba(255,255,255,0.02);margin-top:32px}
    form input,form textarea{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;background:#0b0d12;border:1px solid #1a1d24;color:var(--text)}
    button{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer}
    .tags{margin-top:8px}
    .tags span{display:inline-block;background:#0f1720;padding:5px 8px;border-radius:6px;margin-right:6px;color:var(--muted);font-size:12px}
    @media(max-width:700px){.hero{flex-direction:column;align-items:flex-start}.hero h2{font-size:28px}}
  </style>
</head>
<body>
<header>
  <h1>David Axel Dascanio</h1>
  <nav>
    <a href="#" data-target="home" class="active">Home</a>
    <a href="#" data-target="projects">Games</a>
    <a href="#" data-target="blog">Blog</a>
    <a href="#" data-target="donations">Donations</a>
    <a href="#" data-target="about">About</a>
    <a href="#" data-target="contact">Contact</a>
    <select id="lang" aria-label="language selector">
      <option value="es">ES</option>
      <option value="en">EN</option>
    </select>
  </nav>
</header>
<main>
  <section id="home" class="section active">
    <div class="hero">
      <div class="hero-left">
        <h2 id="homeTitle">Desarrollador de Juegos ¬∑ Unity ¬∑ C#</h2>
        <p id="homeDesc">Programador y artista de videojuegos. Experiencia en Unity, C#, shaders, UI/UX, dise√±o y arte 2D/3D.</p>
        <a class="cta" href="#" data-target="projects" id="homeProjectsBtn">Ver Juegos</a>
      </div>
      <div class="hero-right">
        <img src="photo.jpg" alt="Foto de David Axel Dascanio" />
      </div>
    </div>
  </section>

  <section id="projects" class="section">
    <h3>Proyectos <button id="importItchBtn" class="cta" style="margin-left:12px;font-size:14px">Importar desde itch.io</button></h3>
    <div class="grid" id="projectsGrid"></div>
  </section>

  <section id="detail" class="section">
    <a class="cta" id="backToProjects" style="display:inline-block;margin-bottom:12px">‚Üê Volver a proyectos</a>
    <div class="detail">
      <div style="display:flex;gap:12px;margin-bottom:12px">
        <a class="cta" id="tabOverview" style="padding:6px 12px;font-size:14px">Overview</a>
        <a class="cta" id="tabDevlog" style="padding:6px 12px;font-size:14px;background:#1a2333">Devlog</a>
      </div>

      <div id="detailOverview">
        <h2 id="detailTitle"></h2>
        <div id="detailMedia" style="margin:12px 0"></div>
        <div id="detailThumbs" style="margin:12px 0"></div>
        <p id="detailDesc" style="color:var(--muted)"></p>
        <div id="detailLinks" style="margin-top:10px"></div>
      </div>

      <div id="detailDevlogWrap" style="display:none">
        <h3>Devlog</h3>
        <ul id="detailDevlog"></ul>
      </div>
    </div>
  </section>

  <section id="blog" class="section">
    <h3>Blog</h3>
    <p style="color:var(--muted)">Espacio personal para ideas, notas y comentarios generales. Los devlogs y postmortems de cada juego se encuentran dentro de la ficha de cada proyecto.</p>
    <div id="posts"></div>
  </section>

  <section id="donations" class="section">
    <h3>Donaciones</h3>
    <p id="donText">Si quer√©s apoyar el desarrollo de futuros proyectos pod√©s hacerlo a trav√©s de las siguientes plataformas:</p>

    <div style="display:flex;flex-wrap:wrap;gap:12px;margin-top:16px">
      <a class="cta" href="#" data-donate="paypal">PayPal</a>
      <a class="cta" href="#" data-donate="payoneer">Payoneer</a>
      <a class="cta" href="#" data-donate="binance">Binance</a>
      <a class="cta" href="#" data-donate="mercado">Mercado Pago</a>
    </div>

    <div id="donThanks" style="display:none;margin-top:20px;padding:16px;border-radius:12px;background:#0f1720;color:var(--text)">
      üíô <span id="donThanksText">Gracias por apoyar el desarrollo de mis juegos. Tu aporte ayuda a seguir creando nuevos proyectos.</span>
    </div>
  </section>

  <section id="about" class="section">
    <h3>Sobre m√≠</h3>
    <p><strong>Skills & Abilities:</strong> Programming and development in Unity using C#. SOLID (OOP Fundamentals), Clean Code, URP, HDRP, ASE, UI/UX, Game Design, 2D/3D Art.</p>
    <p><strong>Others:</strong> Narrative (3D Characters, Evolution Arcs, World building), Concept Art, Spritesheets, Model sheets, Animation principles.</p>
    <h4>Experiencia destacada</h4>
    <ul>
      <li>Pirate Penguin / Forja de Almas ‚Äî Memogram ‚Äî GUI Programmer (2024). Multiplayer, optimizaci√≥n, shaders, UI.</li>
      <li>Axie Brawl / Pirate Penguin ‚Äî MOBA ‚Äî Axie Sky Mavis ‚Äî Paused (2023). Implementaci√≥n C#, multiplayer.</li>
      <li>Creepy Dolls ‚Äî GGJ 2020 ‚Äî Lead Programmer.</li>
    </ul>
  </section>

  <section id="contact" class="section">
    <div style="margin-bottom:16px;color:var(--muted)">
      Email: <a href="mailto:lexa.nosferatu@gmail.com">lexa.nosferatu@gmail.com</a> ¬∑ <a href="https://lexanos.itch.io" target="_blank">itch.io</a> ¬∑ <a href="https://www.linkedin.com/in/daviddascanio/" target="_blank">LinkedIn</a>
    </div>
    <h3>Contacto</h3>
    <h4>Enviar mensaje</h4>
    <form id="contactForm">
      <input id="cName" placeholder="Nombre" />
      <input id="cEmail" placeholder="Email" />
      <textarea id="cMsg" placeholder="Mensaje" rows="5"></textarea>
      <button type="button" id="cSend">Enviar</button>
    </form>
  </section>
</main>

<footer>
  ¬© 2025 David Axel Dascanio ‚Äî Lexanos
</footer>

<script>
// --- Data (restaurado + ampliado con assets placeholders)
const PROJECTS = [
  { id:'piratepenguin', title:'Pirate Penguin / Forja de Almas', year:2024,
    desc:{ es:'Juego de acci√≥n con fuerte foco en combate, est√©tica cartoon y progresi√≥n de habilidades.', en:'Action game focused on combat, cartoon aesthetics and skill progression.' },
    longDesc:{ es:'Proyecto de acci√≥n con √©nfasis en combate fluido, shaders personalizados, UI avanzada y progresi√≥n de habilidades.', en:'Action project focused on fluid combat, custom shaders, advanced UI and skill progression.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/pirate_thumb.jpg' }, { type:'video', src:'PLACEHOLDER_VIDEO', poster:'images/pirate_poster.jpg' } ], tags:['Action','Unity'], devlog:['Inicio del proyecto','Primer prototipo de combate','Iteraciones de UI y shaders'] },

  { id:'axiebrawl', title:'Pirate Penguin (Axie Brawl)', year:2023,
    desc:{ es:'MOBA competitivo con √©nfasis en partidas r√°pidas y juego en equipo.', en:'Competitive MOBA focused on fast matches and team play.' },
    longDesc:{ es:'Participaci√≥n en desarrollo MOBA con foco en C#, gameplay y sistemas multiplayer.', en:'MOBA development with focus on C#, gameplay and multiplayer systems.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/axiebrawl_thumb.jpg' }, { type:'video', src:'PLACEHOLDER_VIDEO' } ], tags:['MOBA','Multiplayer'], devlog:['Integraci√≥n de sistemas multiplayer','Balance inicial de personajes'] },

  { id:'llamageddon', title:'Llamageddon', year:2020,
    desc:{ es:'Juego arcade meme con humor absurdo.', en:'Arcade meme game with absurd humor.' },
    longDesc:{ es:'Juego corto de acci√≥n arcade desarrollado como experimento creativo.', en:'Short arcade action game developed as a creative experiment.' },
    links:{ itch:'https://lexanos.itch.io/llamageddon', download:'https://lexanos.itch.io/llamageddon' },
    media:[ { type:'video', src:'PLACEHOLDER_VIDEO', poster:'images/llamageddon_poster.jpg' }, { type:'image', src:'images/llamageddon_ss1.jpg' } ], tags:['Arcade'], devlog:['Concepto inicial','Publicaci√≥n en itch.io'] },

  { id:'artool', title:'Artool', year:2019,
    desc:{ es:'Herramienta creativa para lluvia de ideas.', en:'Creative brainstorming tool.' },
    longDesc:{ es:'Herramienta experimental para procesos creativos y concept art.', en:'Experimental tool for creative processes and concept art.' },
    links:{ itch:'https://lexanos.itch.io/artool', download:'https://lexanos.itch.io/artool' },
    media:[ { type:'image', src:'images/artool_thumb.jpg' } ], tags:['Tool'], devlog:['Dise√±o de herramienta','Release p√∫blico'] },

  { id:'agentrabbit', title:'Agent Rabbit - Climber Ninja', year:2018,
    desc:{ es:'Juego mobile casual de reflejos.', en:'Casual reflex-based mobile game.' },
    longDesc:{ es:'Juego mobile enfocado en escalada, timing y reflejos r√°pidos.', en:'Mobile game focused on climbing, timing and fast reflexes.' },
    links:{ itch:'https://lexanos.itch.io/agent-rabbit-climber-ninja', download:'https://lexanos.itch.io/agent-rabbit-climber-ninja' },
    media:[ { type:'image', src:'images/agentrabbit_thumb.jpg' }, { type:'video', src:'PLACEHOLDER_VIDEO' } ], tags:['Mobile'], devlog:['Prototipo','Optimizaci√≥n mobile','Release'] },

  { id:'wildroad', title:'Wild Road', year:2019,
    desc:{ es:'Beat em up cl√°sico con est√©tica contempor√°nea.', en:'Classic beat em up with contemporary aesthetics.' },
    longDesc:{ es:'Wild Road es un beat em up con niveles dise√±ados para combate fluido y mec√°nicas acumulativas.', en:'Wild Road is a beat em up with levels designed for fluid combat and cumulative mechanics.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/wildroad_thumb.jpg' } ], tags:['BeatEmUp'], devlog:[] },

  { id:'pachis', title:'Pachis', year:2020,
    desc:{ es:'Juego educativo.', en:'Educational game.' },
    longDesc:{ es:'Pachis es un juego educativo pensado para ense√±ar conceptos b√°sicos mediante minijuegos.', en:'Pachis is an educational game designed to teach basic concepts through minigames.' },
    links:{ itch:'https://lexanos.itch.io/pachis', download:'https://lexanos.itch.io/pachis' },
    media:[ { type:'image', src:'images/pachis_thumb.jpg' } ], tags:['Educational'], devlog:[] },

  { id:'greenbrush', title:'Green Brush', year:2018,
    desc:{ es:'Strategy game.', en:'Strategy game.' },
    longDesc:{ es:'Green Brush es un juego de estrategia con componentes educativos y resoluci√≥n por turnos.', en:'Green Brush is a strategy game with educational components and turn-based resolution.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/greenbrush_thumb.jpg' } ], tags:['Strategy'], devlog:[] },

  { id:'thebeyond', title:'The Beyond', year:2017,
    desc:{ es:'3D Adventure.', en:'3D Adventure.' },
    longDesc:{ es:'The Beyond explora mec√°nicas 3D y narrativa ambiental en un mundo semi abierto.', en:'The Beyond explores 3D mechanics and environmental narrative in a semi-open world.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/thebeyond_thumb.jpg' } ], tags:['3D'], devlog:[] },

  { id:'alphabet', title:'Alphabet', year:2015,
    desc:{ es:'Platform Puzzle.', en:'Platform Puzzle.' },
    longDesc:{ es:'Alphabet es un puzzle-platform premiado por su dise√±o intuitivo.', en:'Alphabet is a prize-winning puzzle-platformer known for intuitive design.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/alphabet_thumb.jpg' } ], tags:['Puzzle'], devlog:[] },

  { id:'drunkaholic', title:'Drunkaholic', year:2015,
    desc:{ es:'Casual 3D.', en:'Casual 3D game.' },
    longDesc:{ es:'Proyecto 3D casual orientado a la diversi√≥n y experimentaci√≥n.', en:'Casual 3D project oriented to fun and experimentation.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/drunkaholic_thumb.jpg' } ], tags:['Simulation'], devlog:[] },

  { id:'samuraiblade', title:'Samurai Blade : Rock, Paper & Scissors', year:2024,
    desc:{ es:'Roguelite arcade basado en piedra-papel-tijera.', en:'Roguelite arcade based on rock-paper-scissors combat.' },
    longDesc:{ es:'Combate roguelite con mec√°nicas de piedra-papel-tijera como n√∫cleo.', en:'Roguelite combat with rock-paper-scissors mechanics at its core.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/samuraiblade_thumb.jpg' } ], tags:['Action'], devlog:[] },

  { id:'zombieattack', title:'Zombie Attack Nightmare Endurance Apocalyptic Edition', year:2020,
    desc:{ es:'Shooter apocal√≠ptico.', en:'Apocalyptic shooter.' },
    longDesc:{ es:'Modo endurance apocal√≠ptico con hordas de enemigos.', en:'Endurance apocalyptic mode with hordes of enemies.' },
    links:{ itch:'', download:'' },
    media:[ { type:'image', src:'images/zombieattack_thumb.jpg' } ], tags:['Action'], devlog:[] }
];

// --- i18n
const I18N = {
  es:{ homeTitle:'Desarrollador de Juegos ¬∑ Unity ¬∑ C#', homeDesc:'Programador y artista de videojuegos. Experiencia en Unity, C#, shaders, UI/UX, dise√±o y arte 2D/3D.' },
  en:{ homeTitle:'Game Developer ¬∑ Unity ¬∑ C#', homeDesc:'Programmer and game artist. Experience in Unity, C#, shaders, UI/UX, design and 2D/3D art.' }
};
let LANG='es';

// --- Navigation
const navLinks=document.querySelectorAll('header nav a');
const sections=document.querySelectorAll('main .section');
function showSection(id){sections.forEach(s=>s.classList.remove('active'));const el=document.getElementById(id);if(el)el.classList.add('active');navLinks.forEach(a=>a.classList.toggle('active',a.dataset.target===id));window.scrollTo(0,0);} 
navLinks.forEach(a=>a.addEventListener('click',e=>{e.preventDefault();showSection(a.dataset.target);}));

// Home "Ver Juegos" button
const homeProjectsBtn = document.getElementById('homeProjectsBtn');
if(homeProjectsBtn){
  homeProjectsBtn.addEventListener('click', (e)=>{
    e.preventDefault();
    showSection('projects');
  });
}

// --- Language
function applyLang(){const d=I18N[LANG];document.getElementById('homeTitle').innerText=d.homeTitle;document.getElementById('homeDesc').innerText=d.homeDesc;} 
applyLang();

// --- Render cards (with hover video support)
function renderProjects(){
  const grid=document.getElementById('projectsGrid');
  grid.innerHTML='';
  PROJECTS.forEach(p=>{
    const card=document.createElement('div'); card.className='card';

    // Thumbnail container with image + optional hover video
    const thumb=document.createElement('div'); thumb.className='thumb'; thumb.style.position='relative';
    const imgSrc = (p.media && p.media.find(m=>m.type==='image')) ? p.media.find(m=>m.type==='image').src : 'images/placeholder_thumb.jpg';
    const img=document.createElement('img'); img.src=imgSrc; img.alt=p.title;
    thumb.appendChild(img);

    const videoItem = (p.media || []).find(m=>m.type==='video');
    if(videoItem){
      const vid=document.createElement('video');
      vid.muted=true; vid.loop=true; vid.preload='metadata';
      vid.style.position='absolute'; vid.style.top='0'; vid.style.left='0'; vid.style.width='100%'; vid.style.height='100%'; vid.style.objectFit='cover'; vid.style.display='none';
      if(videoItem.src && videoItem.src!=='PLACEHOLDER_VIDEO') vid.src=videoItem.src;
      if(videoItem.poster) img.src = videoItem.poster; // use poster as default image if provided
      thumb.appendChild(vid);

      // hover play on desktop, click toggle on touch
      thumb.addEventListener('mouseenter', ()=>{
        if(vid.src){ img.style.display='none'; vid.style.display='block'; vid.play().catch(()=>{}); }
      });
      thumb.addEventListener('mouseleave', ()=>{
        if(vid.src){ vid.pause(); vid.style.display='none'; img.style.display='block'; }
      });
      thumb.addEventListener('click', (ev)=>{
        // prevent opening detail when toggling video
        ev.stopPropagation();
        if(vid.src){ if(vid.paused){ vid.play().catch(()=>{}); vid.style.display='block'; img.style.display='none'; } else { vid.pause(); vid.style.display='none'; img.style.display='block'; } }
      });
    }

    const meta=document.createElement('div'); meta.className='meta';
    meta.innerHTML = `<h4>${p.title} <span style="color:var(--muted);font-size:13px">(${p.year})</span></h4><p>${p.desc[LANG]}</p><div class="tags">${(p.tags||[]).map(t=>`<span>${t}</span>`).join('')}</div>`;

    // make title clickable to open overview (stop propagation to avoid double firing)
    const titleEl = meta.querySelector('h4');
    if(titleEl){ titleEl.style.cursor = 'pointer'; titleEl.addEventListener('click', (e)=>{ e.stopPropagation(); openDetail(p.id); }); }

    // make image clickable to open overview (and still allow toggling video via other clicks)
    img.style.cursor = 'pointer';
    img.addEventListener('click', (e)=>{ e.stopPropagation(); openDetail(p.id); });

    card.appendChild(thumb);
    card.appendChild(meta);

    // click opens detail (but clicks on thumb video toggle are stopped)
    card.addEventListener('click', ()=>openDetail(p.id));

    grid.appendChild(card);
  });
}

// initial render
renderProjects();

// --- Itch.io import (uses a public proxy; may fail due to CORS restrictions)
async function importFromItch(username){
  if(!username) return alert('Username is required');
  const proxy = 'https://r.jina.ai/http://' + username + '.itch.io/';
  try{
    const res = await fetch(proxy);
    if(!res.ok) throw new Error('Failed to fetch: '+res.status);
    const text = await res.text();
    const doc = new DOMParser().parseFromString(text,'text/html');
    const anchors = Array.from(doc.querySelectorAll('a'));
    const games = [];
    anchors.forEach(a=>{
      const href = a.getAttribute('href') || a.href || '';
      const title = (a.textContent||'').trim();
      // filter likely game links: non-empty title, not too long, and href contains username or starts with '/'
      if(title && title.length<60 && (href.includes(username+'.itch.io') || href.startsWith('/'))){
        // avoid duplicates
        if(!games.find(g=>g.title===title)) games.push({title, href});
      }
    });

    let added = 0;
    games.forEach(g=>{
      if(!PROJECTS.find(p=>p.title===g.title)){
        const id = g.title.toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
        PROJECTS.push({ id:id, title:g.title, year:'', desc:{es:'',en:''}, longDesc:{es:'',en:''}, links:{itch: g.href.startsWith('http')?g.href:'https://'+username+'.itch.io'+g.href}, media:[{type:'image',src:'images/placeholder_thumb.jpg'}], tags:[], devlog:[] });
        added++;
      }
    });

    if(added>0){ renderProjects(); alert('Importados '+added+' juegos desde '+username); }
    else alert('No se importaron juegos nuevos desde '+username);
  }catch(err){ alert('Import fall√≥: '+err.message+' ‚Äî si falla por CORS, pod√©s exportar la lista manualmente.'); }
}

// attach import button
const importBtn = document.getElementById('importItchBtn');
if(importBtn){ importBtn.addEventListener('click', ()=>{
  const user = prompt('Nombre de usuario de itch.io (ej: lexanos):','lexanos');
  if(user) importFromItch(user.trim());
}); }

// --- Detail
function openDetail(id){
  const p=PROJECTS.find(x=>x.id===id); if(!p) return;
  document.getElementById('detailTitle').innerText=p.title;

  // Main preview area: image or video (video not autoplayed in detail)
  const media=document.getElementById('detailMedia'); media.innerHTML='';
  let mainItem = null;
  if(p.media && p.media.length) mainItem = p.media.find(m=>m.type==='video') || p.media[0];
  if(mainItem){
    if(mainItem.type==='video' && mainItem.src && mainItem.src!=='PLACEHOLDER_VIDEO'){
      const v=document.createElement('video'); v.controls=true; v.src=mainItem.src; v.style.width='100%'; v.style.height='400px'; v.preload='metadata'; media.appendChild(v);
    } else if(mainItem.type==='image'){
      const im=document.createElement('img'); im.src=mainItem.src; im.style.width='100%'; im.style.borderRadius='8px'; media.appendChild(im);
    } else if(mainItem.type==='video' && mainItem.src==='PLACEHOLDER_VIDEO'){
      const ph=document.createElement('div'); ph.style.height='320px'; ph.style.display='flex'; ph.style.alignItems='center'; ph.style.justifyContent='center'; ph.style.background='#0b0d12'; ph.style.color='var(--muted)'; ph.innerText='Video placeholder'; media.appendChild(ph);
    }
  } else if(p.links && p.links.itch){
    const iframe=document.createElement('iframe'); iframe.src=p.links.itch; iframe.style.width='100%'; iframe.style.height='400px'; iframe.style.border='0'; media.appendChild(iframe);
  } else {
    media.innerHTML = '<div style="height:320px;background:#0b0d12;display:flex;align-items:center;justify-content:center;color:var(--muted)">Preview disponible</div>';
  }

  // thumbnails row (images/videos)
  const thumbs=document.getElementById('detailThumbs'); thumbs.innerHTML='';
  (p.media||[]).forEach(m=>{
    const t=document.createElement('div'); t.style.width='120px'; t.style.height='68px'; t.style.overflow='hidden'; t.style.borderRadius='8px'; t.style.cursor='pointer'; t.style.background='#000'; t.style.marginRight='8px';
    if(m.type==='video'){
      const mv=document.createElement('video'); mv.src = (m.src && m.src!=='PLACEHOLDER_VIDEO') ? m.src : ''; mv.muted=true; mv.preload='metadata'; mv.style.width='100%'; mv.style.height='100%'; mv.style.objectFit='cover'; t.appendChild(mv);
      t.addEventListener('click', ()=>{
        // replace main preview
        const main = document.getElementById('detailMedia'); main.innerHTML='';
        if(mv.src){ const v=document.createElement('video'); v.controls=true; v.src=mv.src; v.style.width='100%'; v.style.height='400px'; main.appendChild(v); }
      });
    } else {
      const mi=document.createElement('img'); mi.src=m.src; mi.style.width='100%'; mi.style.height='100%'; mi.style.objectFit='cover'; t.appendChild(mi);
      t.addEventListener('click', ()=>{ const main=document.getElementById('detailMedia'); main.innerHTML=''; const im=document.createElement('img'); im.src=m.src; im.style.width='100%'; im.style.borderRadius='8px'; main.appendChild(im); });
    }
    thumbs.appendChild(t);
  });

  // Description
  const detailDesc=document.getElementById('detailDesc'); detailDesc.innerText = (p.longDesc && p.longDesc[LANG]) ? p.longDesc[LANG] : p.desc[LANG];

  // Links / download
  const linksEl=document.getElementById('detailLinks'); linksEl.innerHTML='';
  if(p.links && p.links.download){ const a=document.createElement('a'); a.href=p.links.download; a.target='_blank'; a.innerText='Download / Play'; a.className='cta'; linksEl.appendChild(a); }
  else if(p.links && p.links.itch){ const a=document.createElement('a'); a.href=p.links.itch; a.target='_blank'; a.innerText='View on itch.io'; a.className='cta'; linksEl.appendChild(a); }
  else { const span=document.createElement('div'); span.style.color='var(--muted)'; span.innerText='No download link available yet.'; linksEl.appendChild(span); }

  // devlog
  const devlog=document.getElementById('detailDevlog'); devlog.innerHTML=''; (p.devlog||[]).forEach(d=>{ const li=document.createElement('li'); li.innerText=d; devlog.appendChild(li); });

  showDetailTab('overview');
  showSection('detail');
}

function showDetailTab(tab){const ov=document.getElementById('detailOverview');const dl=document.getElementById('detailDevlogWrap');const tOv=document.getElementById('tabOverview');const tDl=document.getElementById('tabDevlog');if(tab==='devlog'){ov.style.display='none';dl.style.display='block';tDl.style.background='var(--accent)';tOv.style.background='#1a2333';}else{ov.style.display='block';dl.style.display='none';tOv.style.background='var(--accent)';tDl.style.background='#1a2333';}}

document.getElementById('tabOverview').addEventListener('click',()=>showDetailTab('overview'));
document.getElementById('tabDevlog').addEventListener('click',()=>showDetailTab('devlog'));
document.getElementById('backToProjects').addEventListener('click',()=>showSection('projects'));

showSection('home');
</script>
</body>
</html>
